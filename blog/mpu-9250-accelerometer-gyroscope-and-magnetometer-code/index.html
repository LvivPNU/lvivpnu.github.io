<!DOCTYPE html>
<html class="no-js" lang="en-us">    <head prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# website: http://ogp.me/ns/website#">
        <!-- Global site tag (gtag.js) - Google Analytics -->
        
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-3791456-15"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
        
            gtag('config', 'UA-3791456-15');
        </script>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="description" content="Arduino code for MPU-9250 Accelerometer, Gyroscope and Magnetometer">
        <meta name="author" content="Lviv Polytechnic National University">
		
		<!-- Mobile Specific Meta -->
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="generator" content="Hugo 0.118.2">
		
        <title> MPU-9250 Accelerometer, Gyroscope and Magnetometer Code </title>
                
        <meta property="og:title" content="MPU-9250 Accelerometer, Gyroscope and Magnetometer Code" />
        
        <meta property="og:type" content="article">
        <meta property="article:published_time" content="2019-04-12">
        
        <meta property="og:description" content="Arduino code for MPU-9250 Accelerometer, Gyroscope and Magnetometer" />
        <meta property="og:url" content="https://lvivpnu.github.io/blog/mpu-9250-accelerometer-gyroscope-and-magnetometer-code/" />
        
        <meta property="og:image" content="https://lvivpnu.github.io/images/blog/awesome_cpp.jpg"/>
        <meta property="og:image:secure_url" content="https://lvivpnu.github.io/images/blog/awesome_cpp.jpg"/>
        
        <meta property="og:locale" content="en_GB" />
        <meta property="og:locale:alternate" content="UA_uk" />
        <meta property="og:site_name" content="" />
        
        <meta property="og:tags" content="C&#43;&#43;">
        
        <meta property="og:tags" content="books">
        
        <meta property="og:tags" content="Development">
        
        
		<!-- Favicon -->
		<link rel="shortcut icon" type="image/x-icon" href="https://lvivpnu.github.io/images/favicon.ico"/>
		<!-- CSS -->
		<!-- Fontawesome Icon font -->
        <link rel="stylesheet" href="https://lvivpnu.github.io/css/font-awesome-4.7.0/css/font-awesome.min.css">
        <!-- Font Montserrat -->
        <link href='https://fonts.googleapis.com/css?family=Montserrat:400,700%7CLibre+Baskerville:400,400italic,700' rel='stylesheet' type='text/css'>
        <!-- Getting highlight.js -->
        <link href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/styles/monokai_sublime.min.css' rel='stylesheet' type='text/css'>
        <!-- Getting toastr.js -->
        <link href='https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css' rel='stylesheet' type='text/css'>
        
        <!-- Main Stylesheet -->
        
        
        
        <link rel="stylesheet" href="https://lvivpnu.github.io/css/styles.css" integrity="" media="screen">

    </head><!-- body start -->
<body class="home blog" id="body" data-spy="scroll" data-target=".navbar" data-offset="50"><!-- Fixed Navigation -->

<div id="sidebar" class="sidebar">
    <div class="menu-left-part">
        
        <div class="site-info-holder">
            <h1 class="site-title">Lviv Polytechnic National University</h1>
            <p class="site-description">
            Open Knowledgebase <br> All ingenious is simple
            </p>
        </div>
        <!-- main nav -->
        
        
        <nav id="header-main-menu" class="collapse navbar-collapse navbar-right">
            <ul class="main-menu sm sm-clean">
                <li><a data-scroll href="https://lvivpnu.github.io">Home</a></li>
                
                <li><a data-scroll class="sidebar-nav-item" href="/manual/" title="Онлайн посібник">Онлайн посібник</a></li>
                
                <li><a data-scroll class="sidebar-nav-item" href="/gallery/" title="Gallery">Gallery</a></li>
                
                <li><a data-scroll class="sidebar-nav-item" href="/about/" title="Про сторінку">Про сторінку</a></li>
                
            </ul>
        </nav>
        
        <!-- /main nav -->
        <footer>
            <div class="footer-info">
                © <script>document.write(new Date().getFullYear())</script> Lviv Polytechnic National University. All Rights Reserved.<br/>
                This Web Site Generated by <a href="https://github.com/eneus/jekyll">  Jekyll Docker Containers  .</a>
            </div>
        </footer>
    </div>

    <div class="menu-right-part">
        <div class="logo-holder">
            <!-- logo -->
            <a class="navbar-brand logo" href="https://lvivpnu.github.io">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/de/Nulp_logo_ukr.jpg/280px-Nulp_logo_ukr.jpg" alt="Lviv Polytechnic National University" />
            </a>
            <!-- /logo -->
        </div>

        <div class="toggle-holder">
            <div id="toggle">
                <div class="menu-line"></div>
            </div>
        </div>
        <!-- Footer Social Links -->
        <div class="social-holder">
            <div class="social-list">
                
                <a href="https://www.linkedin.com/school/lviv-polytechnic-national-university/" target="_blank"><i class="fa fa-linkedin"></i></a>
                
                <a href="https://github.com/LvivPNU" target="_blank"><i class="fa fa-github"></i></a>
                
                <a href="https://www.facebook.com/lvivpolytechnic" target="_blank"><i class="fa fa-facebook-official"></i></a>
                
                <a href="https://www.instagram.com/lpnu_official/?hl=uk" target="_blank"><i class="fa fa-instagram"></i></a>
                
                <a href="https://twitter.com/LvPolytechnic" target="_blank"><i class="fa fa-twitter"></i></a>
                
                <a href="https://www.youtube.com/@user-ff1tg1di7o" target="_blank"><i class="fa fa-youtube"></i></a>
                
            </div>
        </div>
        <div class="fixed scroll-top">
            <a href="#" class="btn"></a>
        </div>
    </div>
    <div class="clear"></div>
</div>
<!-- End Fixed Navigation -->

<!-- Single Content -->
    <div id="content" class="single-post site-content center-relative">
        <div class="single-post-wrapper content-1070 center-relative">

            <article class="center-relative">
                <h1 class="entry-title">
                    MPU-9250 Accelerometer, Gyroscope and Magnetometer Code
                </h1>
                <div class="post-info content-660 center-relative">
                    <div class="cat-links">
                        <ul>
                            
                            <li><a href="https://lvivpnu.github.io#">C&#43;&#43;</a></li>
                            
                            <li><a href="https://lvivpnu.github.io#">books</a></li>
                            
                            <li><a href="https://lvivpnu.github.io#">Development</a></li>
                            
                        </ul>
                    </div>
                    <div class="entry-date published">Friday, 12.04.2019</div>
                    <div class="clear"></div>
                </div>
                    
                <div class="entry-content">
                    <div class="post-full-width">
                            <img class="img-fluid mb-50" src="https://lvivpnu.github.io/images/blog/awesome_cpp.jpg" alt="blog-image">
                    </div>
                    <div class="clear"></div>
                    <div class="content-wrap content-660 center-relative">
                        <p>In this Article you will get the code and library for MPU-9250 module. Watch video instruction on how to use MPU-9250.</p>
<ul>
<li><a href="https://github.com/bolderflight/MPU9250">Get MPU-9250 Library from Github</a></li>
<li><a href="/books/PS-MPU-9250A-01-v1.1.pdf">Data sheet for MPU-9250</a></li>
<li><a href="/books/RM-MPU-9250A-00-v1.6.pdf">MPU-9250 Register Map</a></li>
<li><a href="http://robojax.com/learn/arduino/robojax-MPU9250-master.zip">Get Library from Robojax.com</a></li>
<li><a href="http://robojax.com/learn/arduino/?vid=robojax-I2C-scanner">I2C scanner Code and Video</a></li>
<li><a href="https://technicalustad.com/guide-to-interfacing-mpu9250-gyroscope-magnetometer-and-accelerometer-with-a-raspberry-pi/">Guide to interfacing MPU9250 Gyroscope, Magnetometer and Accelerometer with a Raspberry Pi</a></li>
<li><a href="https://www.instructables.com/id/Arduino-Nano-Accelerometer-Gyroscope-Compass-MPU92/">Arduino Nano: Accelerometer Gyroscope Compass MPU9250 I2C Sensor With Visuino</a></li>
<li><a href="https://docs.forward-loop.com/drivers/mpu9250/master/index.html">Drivers for MPU9250 IMU Sensor</a></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">* Library: https://github.com/bolderflight/MPU9250
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">Basic_I2C.ino
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">Brian R Taylor
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">brian.taylor@bolderflight.com
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">Copyright (c) 2017 Bolder Flight Systems
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">Permission is hereby granted, free of charge, to any person obtaining a copy of this software 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">and associated documentation files (the &#34;Software&#34;), to deal in the Software without restriction, 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">including without limitation the rights to use, copy, modify, merge, publish, distribute, 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">furnished to do so, subject to the following conditions:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">The above copyright notice and this permission notice shall be included in all copies or 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">substantial portions of the Software.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">THE SOFTWARE IS PROVIDED &#34;AS IS&#34;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*/</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * Updated by Ahmad Shamshiri on July 09, 2018 for Robojax.com
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * in Ajax, Ontario, Canada
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * watch instrucion video for this code: 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">For this sketch you need to connect:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">VCC to 5V and GND to GND of Arduino
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">SDA to A4 and SCL to A5
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">S20A is 3.3V voltage regulator MIC5205-3.3BM5
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*/</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&#34;MPU9250.h&#34;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// an MPU9250 object with the MPU-9250 sensor on I2C bus 0 with address 0x68
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>MPU9250 <span style="color:#a6e22e">IMU</span>(Wire,<span style="color:#ae81ff">0x68</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> status;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setup</span>() {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// serial to display data
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  Serial.<span style="color:#a6e22e">begin</span>(<span style="color:#ae81ff">115200</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">while</span>(<span style="color:#f92672">!</span>Serial) {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// start communication with IMU 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  status <span style="color:#f92672">=</span> IMU.<span style="color:#a6e22e">begin</span>();
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (status <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>    Serial.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;IMU initialization unsuccessful&#34;</span>);
</span></span><span style="display:flex;"><span>    Serial.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Check IMU wiring or try cycling power&#34;</span>);
</span></span><span style="display:flex;"><span>    Serial.<span style="color:#a6e22e">print</span>(<span style="color:#e6db74">&#34;Status: &#34;</span>);
</span></span><span style="display:flex;"><span>    Serial.<span style="color:#a6e22e">println</span>(status);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span>(<span style="color:#ae81ff">1</span>) {}
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">loop</span>() {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// read the sensor
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  IMU.<span style="color:#a6e22e">readSensor</span>();
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// display the data
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  Serial.<span style="color:#a6e22e">print</span>(<span style="color:#e6db74">&#34;AccelX: &#34;</span>);
</span></span><span style="display:flex;"><span>  Serial.<span style="color:#a6e22e">print</span>(IMU.<span style="color:#a6e22e">getAccelX_mss</span>(),<span style="color:#ae81ff">6</span>);
</span></span><span style="display:flex;"><span>  Serial.<span style="color:#a6e22e">print</span>(<span style="color:#e6db74">&#34;	&#34;</span>);
</span></span><span style="display:flex;"><span>  Serial.<span style="color:#a6e22e">print</span>(<span style="color:#e6db74">&#34;AccelY: &#34;</span>);  
</span></span><span style="display:flex;"><span>  Serial.<span style="color:#a6e22e">print</span>(IMU.<span style="color:#a6e22e">getAccelY_mss</span>(),<span style="color:#ae81ff">6</span>);
</span></span><span style="display:flex;"><span>  Serial.<span style="color:#a6e22e">print</span>(<span style="color:#e6db74">&#34;	&#34;</span>);
</span></span><span style="display:flex;"><span>  Serial.<span style="color:#a6e22e">print</span>(<span style="color:#e6db74">&#34;AccelZ: &#34;</span>);  
</span></span><span style="display:flex;"><span>  Serial.<span style="color:#a6e22e">println</span>(IMU.<span style="color:#a6e22e">getAccelZ_mss</span>(),<span style="color:#ae81ff">6</span>);
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  Serial.<span style="color:#a6e22e">print</span>(<span style="color:#e6db74">&#34;GyroX: &#34;</span>);
</span></span><span style="display:flex;"><span>  Serial.<span style="color:#a6e22e">print</span>(IMU.<span style="color:#a6e22e">getGyroX_rads</span>(),<span style="color:#ae81ff">6</span>);
</span></span><span style="display:flex;"><span>  Serial.<span style="color:#a6e22e">print</span>(<span style="color:#e6db74">&#34;	&#34;</span>);
</span></span><span style="display:flex;"><span>  Serial.<span style="color:#a6e22e">print</span>(<span style="color:#e6db74">&#34;GyroY: &#34;</span>);  
</span></span><span style="display:flex;"><span>  Serial.<span style="color:#a6e22e">print</span>(IMU.<span style="color:#a6e22e">getGyroY_rads</span>(),<span style="color:#ae81ff">6</span>);
</span></span><span style="display:flex;"><span>  Serial.<span style="color:#a6e22e">print</span>(<span style="color:#e6db74">&#34;	&#34;</span>);
</span></span><span style="display:flex;"><span>  Serial.<span style="color:#a6e22e">print</span>(<span style="color:#e6db74">&#34;GyroZ: &#34;</span>);  
</span></span><span style="display:flex;"><span>  Serial.<span style="color:#a6e22e">println</span>(IMU.<span style="color:#a6e22e">getGyroZ_rads</span>(),<span style="color:#ae81ff">6</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  Serial.<span style="color:#a6e22e">print</span>(<span style="color:#e6db74">&#34;MagX: &#34;</span>);  
</span></span><span style="display:flex;"><span>  Serial.<span style="color:#a6e22e">print</span>(IMU.<span style="color:#a6e22e">getMagX_uT</span>(),<span style="color:#ae81ff">6</span>);
</span></span><span style="display:flex;"><span>  Serial.<span style="color:#a6e22e">print</span>(<span style="color:#e6db74">&#34;	&#34;</span>);  
</span></span><span style="display:flex;"><span>  Serial.<span style="color:#a6e22e">print</span>(<span style="color:#e6db74">&#34;MagY: &#34;</span>);
</span></span><span style="display:flex;"><span>  Serial.<span style="color:#a6e22e">print</span>(IMU.<span style="color:#a6e22e">getMagY_uT</span>(),<span style="color:#ae81ff">6</span>);
</span></span><span style="display:flex;"><span>  Serial.<span style="color:#a6e22e">print</span>(<span style="color:#e6db74">&#34;	&#34;</span>);
</span></span><span style="display:flex;"><span>  Serial.<span style="color:#a6e22e">print</span>(<span style="color:#e6db74">&#34;MagZ: &#34;</span>);  
</span></span><span style="display:flex;"><span>  Serial.<span style="color:#a6e22e">println</span>(IMU.<span style="color:#a6e22e">getMagZ_uT</span>(),<span style="color:#ae81ff">6</span>);
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  Serial.<span style="color:#a6e22e">print</span>(<span style="color:#e6db74">&#34;Temperature in C: &#34;</span>);
</span></span><span style="display:flex;"><span>  Serial.<span style="color:#a6e22e">println</span>(IMU.<span style="color:#a6e22e">getTemperature_C</span>(),<span style="color:#ae81ff">6</span>);
</span></span><span style="display:flex;"><span>  Serial.<span style="color:#a6e22e">println</span>();
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">delay</span>(<span style="color:#ae81ff">200</span>);
</span></span><span style="display:flex;"><span>} 
</span></span></code></pre></div><p>Video explanation:\</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p>raspivid -t 0 -h 720 -w 1080 -fps 25 -hf -b 2000000 -o - | gst-launch-1.0 -v fdsrc ! h264parse !  rtph264pay config-interval=1 pt=96 ! gdppay ! tcpserversink host=YOUR_RPI_IP_ADDRESS port=5000</p>
<p>gst-launch-1.0 rtspsrc location=rtsp://140.114.188.219/axis-media/media.amp latency=1200 ! rtph264depay ! h264parse ! mppvideodec ! rkximagesink sync=false</p>

                    </div>
                </div>
                <div class="clear"></div>
            </article>
        <div id="disqus_thread"></div>
<script>

    

    

    (function() { 
    var d = document, s = d.createElement('script');
    s.src = 'https://eneus.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                            
        </div>
    </div>


	<!-- Essential Scripts -->

	<!-- Main jQuery -->
	<script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
	<!-- highlight.js -->
	<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
	<!-- clipboard.js -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
	<!-- toastr.js -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>

	

	<!-- Custom js -->
	
	<script src="https://lvivpnu.github.io/js/main.js"></script>

	<!-- MathJax.js Support -->
	<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async>
		MathJax.Hub.Config({
			tex2jax: {
				inlineMath: [['$', '$'], ['\\(', '\\)']],
				displayMath: [['$$', '$$']],
				processEscapes: true,
				processEnvironments: true,
				skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
				TeX: {
					equationNumbers: { autoNumber: "AMS" },
					extensions: ["AMSmath.js", "AMSsymbols.js"]
				}
			}
		});

		MathJax.Hub.Queue(function () {
			
			
			
			var all = MathJax.Hub.getAllJax(), i;
			for (i = 0; i < all.length; i += 1) {
				all[i].SourceElement().parentNode.className += ' has-jax';
			}
		});

		MathJax.Hub.Config({
			
			TeX: { 
				equationNumbers: { autoNumber: "AMS" } 
			}
		});
	</script>

</body>
</html>